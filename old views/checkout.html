<%- include ('./otherheader.ejs') %>

        <!-- Start of Main -->
        <main class="main checkout">
            <!-- Start of Breadcrumb -->
            <nav class="breadcrumb-nav">
                <div class="container">
                    <ul class="breadcrumb shop-breadcrumb bb-no">
                        <li class="passed"><a href="/mycart">Shopping Cart</a></li>
                        <li class="active"><a href="checkout.html">Checkout</a></li>
                        <li><a href="order.html">Order Complete</a></li>
                    </ul>
                </div>
            </nav>
            <!-- End of Breadcrumb -->


            <!-- Start of PageContent -->
            <div class="page-content">
                <div class="container">
                
                    <h4>Saved Address</h4>
                  
<div class="row">
    <div class="col-lg-8 col-md-12">
						
        <div class="table-responsive mb-3">
            <table id="customers" class="table table-bordered table-sm table-hover mb-0" style="border: #9F9888;">
              
                <tbody>

          <% for(i=0;i<result[3].length;i++) { %>

                    <tr>
                        
                        <td>
                            <div class="radio">
                                <input   class="custom-control-input saved_address" 
                                username = '<%=result[3][i].name%>'
                                state = '<%=result[3][i].state%>'
                                city = '<%=result[3][i].city%>'
                                pincode = '<%=result[3][i].pincode%>'
                                landmark = '<%=result[3][i].landmark%>'
                                area = '<%=result[3][i].area%>'
                                email = '<%=result[3][i].email%>'
                                 id="<%=result[3][i].id%>" type="radio"
                                 name="oldaddress"
                                 >
                                <label class="custom-control-label text-body text-nowrap" for="<%=result[3][i].id%>"><%=result[3][i].name%></label>
                            </div>
                        </td>
                        <td><%=result[3][i].area%> , <%=result[3][i].landmark%>  , <%=result[3][i].state%> ,  <%=result[3][i].pincode%></td>
                    
                    </tr>
                
                    <% } %>
                
                </tbody>
            </table>
        </div>
</div>

                    
                    <div class="coupon-toggle">
                        Have a coupon? <a href="#"
                            class="show-coupon font-weight-bold text-uppercase text-dark">Enter your
                            code</a>
                    </div>
                    <div class="coupon-content mb-4">
                        <p>If you have a coupon code, please apply it below.</p>
                        <div class="input-wrapper-inline">
                            <input type="text" name="coupon_code" class="form-control form-control-md mr-1 mb-2" placeholder="Coupon code" id="coupon_code">
                            <button type="submit" class="btn button btn-rounded btn-coupon mb-2" name="apply_coupon" value="Apply coupon">Apply Coupon</button>
                        </div>
                    </div>
                    <!-- <form action='/order-now' method='post'> -->
                    <form class="form checkout-form"action='/order-now' method="post">
                        <div class="row mb-9">
                            <div class="col-lg-7 pr-lg-4 mb-4">
                                <h3 class="title billing-title text-uppercase ls-10 pt-1 pb-3 mb-0">
                                    Billing Details
                                </h3>
                                <div class="row gutter-sm">
                                    <div class="col-xs-6">
                                        <div class="form-group">
                                            <label>Full name *</label>
                                            <input  class="form-control form-control-md" id="checkoutBillingFirstName" name="first_name" type="text" value="<%=result[4][0].name%>" placeholder="First Name" required="">
                                        </div>
                                    </div>
                                    <div class="col-xs-6">
                                        <div class="form-group">
                                            <label>Email Address *</label>
                                            <input class="form-control form-control-md" id="checkoutBillingEmail" name="email" type="email" placeholder="Email" value="<%=result[4][0].email%>" required="">
                                        </div>
                                    </div>
                                </div>
                              
                                <div class="form-group">
                                    <label>Street address *</label>
                                    <input  placeholder="House number and street name"
                                        class="form-control form-control-md mb-2" id="checkoutBillingAddress" name="address1" type="text"required>  


                                    <input placeholder="Apartment, suite, unit, etc. (optional)"
                                        class="form-control form-control-md" id="checkoutBillingAddressTwo" name="address2" type="text"   required>
                                </div>
                                <div class="row gutter-sm">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label>Town / City *</label>
                                            <input class="form-control form-control-md" id="checkoutBillingTown" name="city" type="text" required>
                                        </div>
                                        <div class="form-group">
                                            <label>ZIP *</label>
                                            <input type="text" class="form-control form-control-md" name='pincode' id="pincode" required>
                                        </div>
                                        
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label>State *</label>
                                              <input class="form-control form-control-sm" id="checkoutBillingState" name="state" type="text" placeholder="State" required="">
   </div>
   <div class="form-group">
    <label>Alternate Mobile Number (Optional)</label>
      <input class="form-control form-control-sm" id="alternate_number" name="alternate_number" type="text"  >
</div>
                                      
                                    </div>
                                </div>
                              
                               

                                
                            </div>
                            <div class="col-lg-5 mb-4 sticky-sidebar-wrapper">
                                <div class="order-summary-wrapper sticky-sidebar">
                                    <h3 class="title text-uppercase ls-10">Your Order</h3>
                                    <div class="order-summary">
                                        <table class="order-table">
                                            <thead>
                                                <tr>
                                                    <th colspan="2">
                                                        <b>Product</b>
                                                    </th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                               
                                                <tr class="cart-subtotal bb-no">
                                                    <td>
                                                        <b>Subtotal</b>
                                                    </td>
                                                    <td>
                                                        <b>Rs. <%=result[2][0].totalprice%></b>
                                                    </td>
                                                </tr>
                                                <tr class="cart-subtotal bb-no">
                                                    <td>
                                                        <b>Shipping Charges</b>
                                                    </td>
                                                    <td>
                                                        <b>Rs. <%=shipping_charges%></b>
                                                    </td>
                                                </tr>
                                            </tbody>
                                            <tfoot>
                                              
                                                <tr class="order-total">
                                                    <th>
                                                        <b>Total</b>
                                                    </th>
                                                    <td>
                                                        <b>Rs. <%=result[2][0].totalprice + shipping_charges%></b>
                                                    </td>
                                                </tr>
                                            </tfoot>
                                        </table>

                                        <h4 class="mb-3">Payment</h4>

                                        <!-- List group -->
                                        <div class="list-group list-group-sm mb-5">
                                            <div class="list-group-item">
                                                <!-- Radio -->
                                                <div class="custom-control custom-radio">
                                                    <!-- Input -->
                                                    <input class="custom-control-input" id="checkoutPaymentCard" name="payment_mode" value="online" type="radio" >
                                                    <!-- Label -->
                                                    <label class="custom-control-label font-size-sm text-body text-nowrap" for="checkoutPaymentCard">Pay Online <img class="ml-2" src="assets/img/card.png" alt="..."></label>
                                                </div>
                                            </div>
        
        
        
        
                                          
        
                                            
                                            <div class="list-group-item">
                                                <!-- Radio -->
                                                <div class="custom-control custom-radio">
                                                    <!-- Input -->
                                                    <input class="custom-control-input" id="checkoutPaymentPaypal" name="payment_mode" value="cash" type="radio" required data-toggle="collapse" data-action="hide" data-target="#checkoutPaymentCardCollapse">
                                                    <!-- Label -->
                                                    <label class="custom-control-label font-size-sm text-body text-nowrap" for="checkoutPaymentPaypal">Cash On Delivery</label>
                                                </div>
                                            </div>
                                            
                                        
                                            
                                        </div>

                                        <div class="form-group place-order pt-6">
                                            <button type="submit" class="btn btn-dark btn-block btn-rounded">Place Order</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
            <!-- End of PageContent -->
        </main>
        <!-- End of Main -->

        <!-- Start of Footer -->
<%- include ('./footer.ejs') %>
     



<script>
    

    $.getJSON(`/api/time`, data => {
        categories1 = data
        fillDropDown('time', data, 'Choose Time Slot', 0)
      
    })
    
    
    $.getJSON(`/api/pincode`, data => {
        pincode = data
        fillDropDown1('pincode', data, 'Choose Time Slot', 0)
      
    })
    
    
    function fillDropDown(id, data, label, selectedid = 0) {
        $(`#${id}`).empty()
        // $(`#${id}`).append($('<option>').val("null").text(label))
    
        $.each(data, (i, item) => {
            if (item.id == selectedid) {
                $(`#${id}`).append($('<option selected>').val(`${item.date} at ${item.time}`).text(`${item.date} at ${item.time}`))
            } else {
                $(`#${id}`).append($('<option>').val(`${item.date} at ${item.time}`).text(`${item.date} at ${item.time}`))
            }
        })
    }
    
    
    
    
    function fillDropDown1(id, data, label, selectedid = 0) {
        $(`#${id}`).empty()
        // $(`#${id}`).append($('<option>').val("null").text(label))
    
        $.each(data, (i, item) => {
            if (item.id == selectedid) {
                $(`#${id}`).append($('<option selected>').val(`${item.area} - ${item.name}`).text(`${item.area} - ${item.name}`))
            } else {
                $(`#${id}`).append($('<option>').val(`${item.area} - ${item.name}`).text(`${item.area} - ${item.name}`))
            }
        })
    }
    
    
    $('.saved_address').click(function(){
        let username = $(this).attr('username')
        let state = $(this).attr('state')
        let city = $(this).attr('city')
        let pincode = $(this).attr('pincode')
        let area = $(this).attr('area')
        let landmark = $(this).attr('landmark')
        let email = $(this).attr('email')
    
    
        $('#checkoutBillingFirstName').val(username)
        $('#checkoutBillingAddress').val(area)
        $('#checkoutBillingAddressTwo').val(landmark)
        $('#checkoutBillingTown').val(city)
        $('#checkoutBillingState').val(state)
        $('#pincode').val(pincode)
        $('#checkoutBillingEmail').val(email)
    
    })
    
    </script>

<!-- Mirrored from portotheme.com/html/wolmart/checkout.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 30 Jun 2021 06:20:01 GMT -->
</html>